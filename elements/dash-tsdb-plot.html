<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/polymer-ajax/polymer-ajax.html">
<link rel="import" href="dash-tsdb-query.html">

<script src="dash-tsdb-plot.js"></script>
<polymer-element name="dash-tsdb-plot" attributes="width height start end spec">
  <template>
    <span> Trying graph {{width}} {{height}} {{start}} {{end}} {{spec}} </span>
    <div id="plot" width={{width}} height={{height}}>
      <polymer-ajax auto url="groupings.json" 
        handleAs="json"
        on-polymer-response="{{gotSpec}}">
      </polymer-ajax>
      <template if="{{ spec == undefined }}">
        <H1>No spec set!</h1>
      </template>
      <template if="{{ spec != undefined }}">
        <div id="chart"></div>
        <div id="key"></div>
        <h1> spec: {{spec}} </h1>
        <dash-tsdb-query metric="proc.load.1min" start="{{start}}" end="{{end}}"></dash-tsdb-query>
      </template>
    </div>
  </template>
</polymer-element>

