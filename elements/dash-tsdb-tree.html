<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/polymer-ajax/polymer-ajax.html">

<polymer-element name="dash-tsdb-tree" attributes="tree_id groups">
  <template>
    <H2>TSDB Tree {{tree_id}}</h2>

    <polymer-ajax id="req" auto url="/api/tree/branch?treeid={{tree_id}}"
      handleAs="json"
      on-polymer-response="{{gotBranch}}">
    </polymer-ajax>

    <template repeat="{{ branch in branches }}">
      <h2> Branch {{branch}} </h2>
    </template>
  </template>
  <script>
    Polymer('dash-tsdb-tree', {
      tree_id: 1,
    gotBranch: function(ev,resp){
                 console.log("got here");
                 console.log(resp);
                 this.leaves = resp.response.leaves;
                 this.branches = resp.response.branches;
               },
        ready: function(){
                 this.leaves = [];
                 this.branches = [];
               }
    });
  </script>
</polymer-element>
