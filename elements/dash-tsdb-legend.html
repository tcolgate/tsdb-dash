<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="dash-tsdb-legend-handle.html">

<polymer-element name="dash-tsdb-legend" attributes="spec series chart open">
  <template>
    <template if="{{ spec != undefined && series != undefined}}">
      <template if="{{ open }}">
        <table>
          <thead>
            <tr>
            <th align="left"><em on-click="{{ unsetOpen }}">-</em></th>
            <th>cur</th>
            <th>min</th>
            <th>avg</th>
            <th>max</th>
            <th>sum</th>
            </tr>
          </thead>
          <tbody>
          <template repeat="{{ s in summary }}">
            <tr>
              <template if="{{ s.spec != undefined && s.series != undefined}}">
                <td> 
                  <dash-tsdb-legend-handle
                    seriesId="{{ s.sid }}"
                    series="{{ s.series }}"
                    chart="{{ chart }}">
                  </dash-tsdb-legend-handle>
                </td>
                <td>{{ s.cur }} </td>
                <td>{{ s.min }} </td>
                <td>{{ s.avg }} </td>
                <td>{{ s.max }} </td>
                <td>{{ s.sum }} </td>
              </template>
            </tr>
          </template>
          </tbody>
        </table>
      </template>
      <template if="{{ ! open }}">
        <em on-click="{{ setOpen }}">+</em>
        <template repeat="{{ s in summary }}">
          <template if="{{ s.spec != undefined && s.series != undefined}}">
              <dash-tsdb-legend-handle
                seriesId="{{ s.sid }}"
                series="{{ s.series }}"
                chart="{{ chart }}">
              </dash-tsdb-legend-handle>
          </template>
        </template>
      </template>
    </template>
  </template>
  <script src="dash-tsdb-legend.js"></script>
</polymer-element>

