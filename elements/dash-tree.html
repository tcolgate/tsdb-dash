<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../elements/dash-tsdb-tree.html">

<polymer-element name="dash-tree">
  <template>
    <H1>TSDB Dasboard</h1>

    <core-ajax auto url="/api/tree" 
      handleAs="json"
      on-core-response="{{gotTrees}}">
    </core-ajax>

    <core-ajax auto url="../groupings.json" 
      handleAs="json"
      on-core-response="{{gotGroups}}">
    </core-ajax>

    <template if="{{ groups != [] }}">
      <template repeat="{{ tree in trees }}">
        <dash-tsdb-tree tree_id="{{tree.treeId}}" groups="{{groups}}"></dash-tsdb-tree>
      </template>
    </template>

  </template>
  <script src="dash-tree.js"></script>
</polymer-element>
